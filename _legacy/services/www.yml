services:
  www:
    depends_on:
      - rproxy
    container_name: ${COMPOSE_PROJECT_NAME}_www
    hostname: www
    networks:
      - servers
    build:
      context: ./app/www
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 1g
  files:
    depends_on:
      - rproxy
    container_name: ${COMPOSE_PROJECT_NAME}_files
    hostname: files
    networks:
      - servers
    build:
      context: ./app/files
    volumes:
      - $FILES_DATA_DIR:/var/www/html
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 1g